<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù¾Ø®Ø´ Ø²Ù†Ø¯Ù‡ ØªÙ„ÙˆÛŒØ²ÛŒÙˆÙ† Ùˆ Ø±Ø§Ø¯ÛŒÙˆ Ø§ÛŒØ±Ø§Ù†</title>
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;500;700;900&display=swap" rel="stylesheet">
    <style>
        * { font-family: 'Vazirmatn', sans-serif; }
        .channel-card:hover { transform: scale(1.05); }
        .channel-card.active { ring: 4px; }
        .category-btn.active { background: linear-gradient(135deg, #3b82f6, #8b5cf6); }
        .player-container { aspect-ratio: 16/9; }
        .quality-menu { display: none; }
        .quality-menu.show { display: block; }
        .scrollbar-hide::-webkit-scrollbar { display: none; }
        .scrollbar-hide { -ms-overflow-style: none; scrollbar-width: none; }
        @keyframes pulse-live { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
        .live-indicator { animation: pulse-live 1.5s infinite; }
        .gradient-bg { background: linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #0f172a 100%); }
        input[type="range"] { -webkit-appearance: none; }
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 14px;
            height: 14px;
            border-radius: 50%;
            background: #3b82f6;
            cursor: pointer;
            margin-top: -5px;
        }
        input[type="range"]::-webkit-slider-runnable-track {
            height: 4px;
            background: #475569;
            border-radius: 2px;
        }
    </style>
</head>
<body class="gradient-bg min-h-screen text-white">
    <!-- Header -->
    <header class="bg-slate-900/80 backdrop-blur-md sticky top-0 z-50 border-b border-slate-700">
        <div class="container mx-auto px-4 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center gap-3">
                    <div class="w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl flex items-center justify-center">
                        <svg class="w-7 h-7" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M21 3H3c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h5v2h8v-2h5c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 14H3V5h18v12z"/>
                        </svg>
                    </div>
                    <div>
                        <h1 class="text-xl md:text-2xl font-bold bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent">ØªÙ„ÙˆÛŒØ²ÛŒÙˆÙ† Ø²Ù†Ø¯Ù‡</h1>
                        <p class="text-xs text-slate-400">Ù¾Ø®Ø´ Ø²Ù†Ø¯Ù‡ Ø´Ø¨Ú©Ù‡â€ŒÙ‡Ø§ÛŒ Ø§ÛŒØ±Ø§Ù†</p>
                    </div>
                </div>
                <div class="flex items-center gap-2">
                    <span class="live-indicator w-3 h-3 bg-red-500 rounded-full"></span>
                    <span class="text-sm text-slate-300">Ø²Ù†Ø¯Ù‡</span>
                </div>
            </div>
        </div>
    </header>

    <main class="container mx-auto px-4 py-6">
        <!-- Player Section -->
        <div class="mb-8">
            <div class="bg-slate-800/50 rounded-2xl overflow-hidden shadow-2xl border border-slate-700">
                <!-- Video Player -->
                <div class="player-container relative bg-black">
                    <video id="videoPlayer" class="w-full h-full" playsinline></video>
                    
                    <!-- Loading Overlay -->
                    <div id="loadingOverlay" class="absolute inset-0 flex items-center justify-center bg-black/80 hidden">
                        <div class="text-center">
                            <div class="w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"></div>
                            <p class="text-slate-300">Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ...</p>
                        </div>
                    </div>

                    <!-- Error Overlay -->
                    <div id="errorOverlay" class="absolute inset-0 flex items-center justify-center bg-black/80 hidden">
                        <div class="text-center p-6">
                            <svg class="w-16 h-16 text-red-500 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                            </svg>
                            <p class="text-white font-bold mb-2">Ø®Ø·Ø§ Ø¯Ø± Ù¾Ø®Ø´ ÙˆÛŒØ¯ÛŒÙˆ</p>
                            <p class="text-slate-400 text-sm mb-4">Ù„Ø·ÙØ§Ù‹ Ø¯ÙˆØ¨Ø§Ø±Ù‡ ØªÙ„Ø§Ø´ Ú©Ù†ÛŒØ¯</p>
                            <button onclick="retryPlay()" class="px-6 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg transition">ØªÙ„Ø§Ø´ Ù…Ø¬Ø¯Ø¯</button>
                        </div>
                    </div>

                    <!-- Placeholder -->
                    <div id="placeholderOverlay" class="absolute inset-0 flex items-center justify-center bg-gradient-to-br from-slate-800 to-slate-900">
                        <div class="text-center">
                            <svg class="w-24 h-24 text-slate-600 mx-auto mb-4" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M21 3H3c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h5v2h8v-2h5c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 14H3V5h18v12z"/>
                            </svg>
                            <p class="text-slate-400 text-lg">ÛŒÚ© Ø´Ø¨Ú©Ù‡ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</p>
                        </div>
                    </div>
                </div>

                <!-- Controls -->
                <div class="bg-slate-900/90 p-4">
                    <div class="flex flex-wrap items-center justify-between gap-4">
                        <!-- Current Channel Info -->
                        <div class="flex items-center gap-3">
                            <div id="currentChannelIcon" class="w-10 h-10 bg-slate-700 rounded-lg flex items-center justify-center text-lg">ğŸ“º</div>
                            <div>
                                <h3 id="currentChannelName" class="font-bold text-white">Ø´Ø¨Ú©Ù‡â€ŒØ§ÛŒ Ø§Ù†ØªØ®Ø§Ø¨ Ù†Ø´Ø¯Ù‡</h3>
                                <p id="currentChannelCategory" class="text-xs text-slate-400">Ø¨Ø±Ø§ÛŒ Ø´Ø±ÙˆØ¹ ÛŒÚ© Ø´Ø¨Ú©Ù‡ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</p>
                            </div>
                        </div>

                        <!-- Player Controls -->
                        <div class="flex items-center gap-2 flex-wrap">
                            <!-- Play/Pause -->
                            <button id="playPauseBtn" onclick="togglePlayPause()" class="w-12 h-12 bg-slate-700 hover:bg-slate-600 rounded-xl flex items-center justify-center transition">
                                <svg id="playIcon" class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M8 5v14l11-7z"/>
                                </svg>
                                <svg id="pauseIcon" class="w-6 h-6 hidden" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/>
                                </svg>
                            </button>

                            <!-- Live Button -->
                            <button onclick="goLive()" class="px-4 h-12 bg-red-600 hover:bg-red-700 rounded-xl flex items-center gap-2 transition">
                                <span class="w-2 h-2 bg-white rounded-full live-indicator"></span>
                                <span class="font-medium">Ø²Ù†Ø¯Ù‡</span>
                            </button>

                            <!-- Quality Selector -->
                            <div class="relative">
                                <button onclick="toggleQualityMenu()" class="px-4 h-12 bg-slate-700 hover:bg-slate-600 rounded-xl flex items-center gap-2 transition">
                                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"/>
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                                    </svg>
                                    <span id="currentQuality">Ú©ÛŒÙÛŒØª</span>
                                </button>
                                <div id="qualityMenu" class="quality-menu absolute bottom-full right-0 mb-2 bg-slate-800 rounded-xl overflow-hidden shadow-xl border border-slate-600 min-w-[150px]">
                                    <!-- Quality options will be added dynamically -->
                                </div>
                            </div>

                            <!-- Volume Control -->
                            <div class="flex items-center gap-2 bg-slate-700 rounded-xl px-3 h-12" dir="ltr">
                                <input type="range" id="volumeSlider" min="0" max="100" value="100" 
                                       class="w-20 cursor-pointer"
                                       onchange="setVolume(this.value)" oninput="setVolume(this.value)">
                                <span id="volumePercent" class="text-xs text-slate-400 w-8">100%</span>
                                <button onclick="toggleMute()" class="text-white hover:text-blue-400 transition">
                                    <svg id="volumeIcon" class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                                        <path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/>
                                    </svg>
                                    <svg id="muteIcon" class="w-5 h-5 hidden" fill="currentColor" viewBox="0 0 24 24">
                                        <path d="M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z"/>
                                    </svg>
                                </button>
                            </div>

                            <!-- Fullscreen -->
                            <button onclick="toggleFullscreen()" class="w-12 h-12 bg-slate-700 hover:bg-slate-600 rounded-xl flex items-center justify-center transition">
                                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"/>
                                </svg>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Category Tabs -->
        <div class="mb-6 overflow-x-auto scrollbar-hide">
            <div class="flex gap-2 min-w-max pb-2">
                <button onclick="filterCategory('all')" class="category-btn active px-5 py-3 bg-slate-700 hover:bg-slate-600 rounded-xl font-medium transition whitespace-nowrap" data-category="all">
                    Ù‡Ù…Ù‡
                </button>
                <button onclick="filterCategory('main')" class="category-btn px-5 py-3 bg-slate-700 hover:bg-slate-600 rounded-xl font-medium transition whitespace-nowrap" data-category="main">
                    ğŸ“º Ø´Ø¨Ú©Ù‡â€ŒÙ‡Ø§ÛŒ Ø§ØµÙ„ÛŒ
                </button>
                <button onclick="filterCategory('special')" class="category-btn px-5 py-3 bg-slate-700 hover:bg-slate-600 rounded-xl font-medium transition whitespace-nowrap" data-category="special">
                    ğŸ¯ Ø´Ø¨Ú©Ù‡â€ŒÙ‡Ø§ÛŒ ØªØ®ØµØµÛŒ
                </button>
                <button onclick="filterCategory('provincial')" class="category-btn px-5 py-3 bg-slate-700 hover:bg-slate-600 rounded-xl font-medium transition whitespace-nowrap" data-category="provincial">
                    ğŸ›ï¸ Ø´Ø¨Ú©Ù‡â€ŒÙ‡Ø§ÛŒ Ø§Ø³ØªØ§Ù†ÛŒ
                </button>
                <button onclick="filterCategory('international')" class="category-btn px-5 py-3 bg-slate-700 hover:bg-slate-600 rounded-xl font-medium transition whitespace-nowrap" data-category="international">
                    ğŸŒ Ø´Ø¨Ú©Ù‡â€ŒÙ‡Ø§ÛŒ Ø¨ÛŒÙ†â€ŒØ§Ù„Ù…Ù„Ù„ÛŒ
                </button>
                <button onclick="filterCategory('radio')" class="category-btn px-5 py-3 bg-slate-700 hover:bg-slate-600 rounded-xl font-medium transition whitespace-nowrap" data-category="radio">
                    ğŸ“» Ø±Ø§Ø¯ÛŒÙˆÙ‡Ø§
                </button>
                <button onclick="filterCategory('other')" class="category-btn px-5 py-3 bg-slate-700 hover:bg-slate-600 rounded-xl font-medium transition whitespace-nowrap" data-category="other">
                    âœ¨ Ø³Ø§ÛŒØ± Ø´Ø¨Ú©Ù‡â€ŒÙ‡Ø§
                </button>
            </div>
        </div>

        <!-- Channels Grid -->
        <div id="channelsGrid" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4">
            <!-- Channels will be rendered here -->
        </div>
    </main>

    <!-- Footer -->
    <footer class="mt-12 py-6 border-t border-slate-800">
        <div class="container mx-auto px-4 text-center text-slate-500 text-sm">
            <p>Ù¾Ø®Ø´ Ø²Ù†Ø¯Ù‡ ØªÙ„ÙˆÛŒØ²ÛŒÙˆÙ† Ùˆ Ø±Ø§Ø¯ÛŒÙˆ Ø§ÛŒØ±Ø§Ù†</p>
            <p class="mt-2 text-xs">Ù…ÛŒØ§Ù†Ø¨Ø±Ù‡Ø§: Space (Ù¾Ø®Ø´/ØªÙˆÙ‚Ù) | F (ØªÙ…Ø§Ù… ØµÙØ­Ù‡) | M (Ù‚Ø·Ø¹ ØµØ¯Ø§) | â†‘â†“ (ØªÙ†Ø¸ÛŒÙ… ØµØ¯Ø§)</p>
        </div>
    </footer>

    <script>
        // Channel Data
        const channels = [
            // Main Channels
            { id: 1, name: 'Ø´Ø¨Ú©Ù‡ Û±', url: 'http://5.123.1.2/wh7f454c46tw0/PLTV/88888888/224/3221226637/index.m3u8', category: 'main', icon: 'Û±' },
            { id: 2, name: 'Ø´Ø¨Ú©Ù‡ Û²', url: 'http://5.123.1.2/wh7f454c46tw0/PLTV/88888888/224/3221226176/index.m3u8', category: 'main', icon: 'Û²' },
            { id: 3, name: 'Ø´Ø¨Ú©Ù‡ Û³', url: 'http://5.123.1.2/wh7f454c46tw0/PLTV/88888888/224/3221226868/index.m3u8', category: 'main', icon: 'Û³' },
            { id: 4, name: 'Ø´Ø¨Ú©Ù‡ Û´', url: 'http://5.123.1.2/wh7f454c46tw0/PLTV/88888888/224/3221226140/index.m3u8', category: 'main', icon: 'Û´' },
            { id: 5, name: 'Ø´Ø¨Ú©Ù‡ Ûµ', url: 'http://5.123.1.2/wh7f454c46tw0/PLTV/88888888/224/3221226141/index.m3u8', category: 'main', icon: 'Ûµ' },
            { id: 6, name: 'Ø´Ø¨Ú©Ù‡ Ø®Ø¨Ø±', url: 'http://5.123.1.2/wh7f454c46tw0/PLTV/88888888/224/3221226142/index.m3u8', category: 'main', icon: 'ğŸ“°' },
            { id: 7, name: 'Ø´Ø¨Ú©Ù‡ Ù¾ÙˆÛŒØ§', url: 'http://5.123.1.2/wh7f454c46tw0/PLTV/88888888/224/3221226145/index.m3u8', category: 'main', icon: 'ğŸ¨' },
            { id: 8, name: 'Ø´Ø¨Ú©Ù‡ ØªÙ…Ø§Ø´Ø§', url: 'http://5.123.1.2/wh7f454c46tw0/PLTV/88888888/224/3221226879/index.m3u8', category: 'main', icon: 'ğŸ‘€' },
            { id: 9, name: 'Ø´Ø¨Ú©Ù‡ Ù†Ù…Ø§ÛŒØ´', url: 'http://5.123.1.2/wh7f454c46tw0/PLTV/88888888/224/3221226148/index.m3u8', category: 'main', icon: 'ğŸ¬' },
            { id: 10, name: 'Ø´Ø¨Ú©Ù‡ Ù†Ø³ÛŒÙ…', url: 'http://5.123.1.2/wh7f454c46tw0/PLTV/88888888/224/3221226653/index.m3u8', category: 'main', icon: 'ğŸŒ¸' },
            { id: 11, name: 'Ø´Ø¨Ú©Ù‡ Ø¢ÛŒ ÙÛŒÙ„Ù…', url: 'http://5.123.1.2/wh7f454c46tw0/PLTV/88888888/224/3221226842/index.m3u8', category: 'main', icon: 'ğŸ¥' },
            { id: 12, name: 'Ø´Ø¨Ú©Ù‡ ÙˆØ±Ø²Ø´', url: 'http://5.123.1.2/wh7f454c46tw0/PLTV/88888888/224/3221226845/index.m3u8', category: 'main', icon: 'âš½' },

            // Special Channels
            { id: 13, name: 'Ø´Ø¨Ú©Ù‡ Ø§Ù…ÛŒØ¯', url: 'http://5.123.1.2/wh7f454c46tw0/PLTV/88888888/224/3221226159/index.m3u8', category: 'special', icon: 'ğŸŒŸ' },
            { id: 14, name: 'Ø´Ø¨Ú©Ù‡ Ø§ÙÙ‚', url: 'http://5.123.1.2/wh7f454c46tw0/PLTV/88888888/224/3221226143/index.m3u8', category: 'special', icon: 'ğŸŒ…' },
            { id: 15, name: 'Ø´Ø¨Ú©Ù‡ Ù…Ø³ØªÙ†Ø¯', url: 'http://5.123.1.2/wh7f454c46tw0/PLTV/88888888/224/3221226901/index.m3u8', category: 'special', icon: 'ğŸï¸' },
            { id: 16, name: 'Ø´Ø¨Ú©Ù‡ Ø¢Ù…ÙˆØ²Ø´', url: 'http://5.123.1.2/wh7f454c46tw0/PLTV/88888888/224/3221226151/index.m3u8', category: 'special', icon: 'ğŸ“š' },
            { id: 17, name: 'Ø´Ø¨Ú©Ù‡ Ø³Ù„Ø§Ù…Øª', url: 'http://5.123.1.2/wh7f454c46tw0/PLTV/88888888/224/3221226152/index.m3u8', category: 'special', icon: 'ğŸ¥' },
            { id: 18, name: 'Ø´Ø¨Ú©Ù‡ Ù‚Ø±Ø¢Ù†', url: 'http://5.123.1.2/wh7f454c46tw0/PLTV/88888888/224/3221226144/index.m3u8', category: 'special', icon: 'ğŸ“–' },

            // Provincial Channels
            { id: 19, name: 'Ø´Ø¨Ú©Ù‡ Ù…Ø§Ø²Ù†Ø¯Ø±Ø§Ù†', url: 'http://5.123.1.2/wh7f454c46tw0/PLTV/88888888/224/3221226786/index.m3u8', category: 'provincial', icon: 'ğŸŒ²' },
            { id: 20, name: 'Ø´Ø¨Ú©Ù‡ Ø¢Ø°Ø±Ø¨Ø§ÛŒØ¬Ø§Ù† ØºØ±Ø¨ÛŒ', url: 'http://5.123.1.2/wh7f454c46tw0/PLTV/88888888/224/3221226800/index.m3u8', category: 'provincial', icon: 'ğŸ”ï¸' },
            { id: 21, name: 'Ø´Ø¨Ú©Ù‡ Ú©Ø±Ù…Ø§Ù†', url: 'http://5.123.1.2/wh7f454c46tw0/PLTV/88888888/224/3221226856/index.m3u8', category: 'provincial', icon: 'ğŸœï¸' },
            { id: 22, name: 'Ø´Ø¨Ú©Ù‡ Ø§ÙÙ„Ø§Ú© Ù„Ø±Ø³ØªØ§Ù†', url: 'http://5.123.1.2/wh7f454c46tw0/PLTV/88888888/224/3221226675/index.m3u8', category: 'provincial', icon: 'â›°ï¸' },
            { id: 23, name: 'Ø´Ø¨Ú©Ù‡ Ø§ØµÙÙ‡Ø§Ù†', url: 'http://5.123.1.2/wh7f454c46tw0/PLTV/88888888/224/3221226652/index.m3u8', category: 'provincial', icon: 'ğŸ•Œ' },
            { id: 24, name: 'Ø´Ø¨Ú©Ù‡ ÙØ§Ø±Ø³', url: 'http://5.123.1.2/wh7f454c46tw0/PLTV/88888888/224/3221226701/index.m3u8', category: 'provincial', icon: 'ğŸŒ¹' },
            { id: 25, name: 'Ø´Ø¨Ú©Ù‡ Ú©Ø±Ø¯Ø³ØªØ§Ù†', url: 'http://5.123.1.2/wh7f454c46tw0/PLTV/88888888/224/3221226647/index.m3u8', category: 'provincial', icon: 'ğŸŒ„' },
            { id: 26, name: 'Ø´Ø¨Ú©Ù‡ Ø®ÙˆØ²Ø³ØªØ§Ù†', url: 'http://5.123.1.2/wh7f454c46tw0/PLTV/88888888/224/3221226415/index.m3u8', category: 'provincial', icon: 'ğŸŒ´' },
            { id: 27, name: 'Ø´Ø¨Ú©Ù‡ Ø³Ù‡Ù†Ø¯', url: 'http://5.123.1.2/wh7f454c46tw0/PLTV/88888888/224/3221226423/index.m3u8', category: 'provincial', icon: 'ğŸ—»' },
            { id: 28, name: 'Ø´Ø¨Ú©Ù‡ Ù‚Ø²ÙˆÛŒÙ†', url: 'http://5.123.1.2/wh7f454c46tw0/PLTV/88888888/224/3221226888/index.m3u8', category: 'provincial', icon: 'ğŸ›ï¸' },
            { id: 29, name: 'Ø´Ø¨Ú©Ù‡ Ø¢ÙØªØ§Ø¨', url: 'http://5.123.1.2/wh7f454c46tw0/PLTV/88888888/224/3221226899/index.m3u8', category: 'provincial', icon: 'â˜€ï¸' },
            { id: 30, name: 'Ø´Ø¨Ú©Ù‡ Ø¨Ø§Ø±Ø§Ù†', url: 'http://5.123.1.2/wh7f454c46tw0/PLTV/88888888/224/3221226902/index.m3u8', category: 'provincial', icon: 'ğŸŒ§ï¸' },

            // International Channels
            { id: 31, name: 'Ø´Ø¨Ú©Ù‡ Ù¾Ø±Ø³ ØªÛŒ ÙˆÛŒ', url: 'http://5.123.1.2/wh7f454c46tw0/PLTV/88888888/224/3221226156/index.m3u8', category: 'international', icon: 'ğŸŒ' },
            { id: 32, name: 'Ø´Ø¨Ú©Ù‡ Ø§Ù„Ø¹Ø§Ù„Ù…', url: 'http://5.123.1.2/wh7f454c46tw0/PLTV/88888888/224/3221226157/index.m3u8', category: 'international', icon: 'ğŸŒ' },
            { id: 33, name: 'Ø´Ø¨Ú©Ù‡ Ø§Ù„Ú©ÙˆØ«Ø±', url: 'http://5.123.1.2/wh7f454c46tw0/PLTV/88888888/224/3221226158/index.m3u8', category: 'international', icon: 'ğŸ•‹' },
            { id: 34, name: 'Ø´Ø¨Ú©Ù‡ Ø¬Ø§Ù… Ø¬Ù…', url: 'http://5.123.1.2/wh7f454c46tw0/PLTV/88888888/224/3221226178/index.m3u8', category: 'international', icon: 'ğŸ†' },
            { id: 35, name: 'Ø´Ø¨Ú©Ù‡ Ø³Ù¾Ù‡Ø±', url: 'http://5.123.1.2/wh7f454c46tw0/PLTV/88888888/224/3221226161/index.m3u8', category: 'international', icon: 'ğŸ›¡ï¸' },
            { id: 36, name: 'Ø´Ø¨Ú©Ù‡ Ù‡ÛŒØ³Ù¾Ø§Ù† ØªÛŒ ÙˆÛŒ', url: 'http://5.123.1.2/wh7f454c46tw0/PLTV/88888888/224/3221226471/index.m3u8', category: 'international', icon: 'ğŸ‡ªğŸ‡¸' },

            // Radio Stations
            { id: 37, name: 'Ø±Ø§Ø¯ÛŒÙˆ ÙˆØ±Ø²Ø´ Ø¨Ø§Ù†ÙˆØ§Ù†', url: 'http://5.123.1.2/wh7f454c46tw0/PLTV/88888888/224/3221226789/index.m3u8', category: 'radio', icon: 'ğŸƒâ€â™€ï¸' },
            { id: 38, name: 'Ø±Ø§Ø¯ÛŒÙˆ Ø§ÛŒØ±Ø§Ù†', url: 'http://5.123.1.2/wh7f454c46tw0/PLTV/88888888/224/3221226162/index.m3u8', category: 'radio', icon: 'ğŸ‡®ğŸ‡·' },
            { id: 39, name: 'Ø±Ø§Ø¯ÛŒÙˆ ÙØ±Ù‡Ù†Ú¯', url: 'http://5.123.1.2/wh7f454c46tw0/PLTV/88888888/224/3221226163/index.m3u8', category: 'radio', icon: 'ğŸ­' },
            { id: 40, name: 'Ø±Ø§Ø¯ÛŒÙˆ Ù‚Ø±Ø¢Ù†', url: 'http://5.123.1.2/wh7f454c46tw0/PLTV/88888888/224/3221226166/index.m3u8', category: 'radio', icon: 'ğŸ“¿' },
            { id: 41, name: 'Ø±Ø§Ø¯ÛŒÙˆ Ù…Ø¹Ø§Ø±Ù', url: 'http://5.123.1.2/wh7f454c46tw0/PLTV/88888888/224/3221226164/index.m3u8', category: 'radio', icon: 'ğŸ“•' },
            { id: 42, name: 'Ø±Ø§Ø¯ÛŒÙˆ Ø¬ÙˆØ§Ù†', url: 'http://5.123.1.2/wh7f454c46tw0/PLTV/88888888/224/3221226165/index.m3u8', category: 'radio', icon: 'ğŸ§' },
            { id: 43, name: 'Ø±Ø§Ø¯ÛŒÙˆ Ù¾ÛŒØ§Ù…', url: 'http://5.123.1.2/wh7f454c46tw0/PLTV/88888888/224/3221226167/index.m3u8', category: 'radio', icon: 'ğŸ’¬' },
            { id: 44, name: 'Ø±Ø§Ø¯ÛŒÙˆ Ø¢ÙˆØ§', url: 'http://5.123.1.2/wh7f454c46tw0/PLTV/88888888/224/3221226168/index.m3u8', category: 'radio', icon: 'ğŸµ' },
            { id: 45, name: 'Ø±Ø§Ø¯ÛŒÙˆ ÙˆØ±Ø²Ø´', url: 'http://5.123.1.2/wh7f454c46tw0/PLTV/88888888/224/3221226169/index.m3u8', category: 'radio', icon: 'ğŸ…' },
            { id: 46, name: 'Ø±Ø§Ø¯ÛŒÙˆ ØµØ¨Ø§', url: 'http://5.123.1.2/wh7f454c46tw0/PLTV/88888888/224/3221226459/index.m3u8', category: 'radio', icon: 'ğŸŒ…' },
            { id: 47, name: 'Ø±Ø§Ø¯ÛŒÙˆ Ù†Ù…Ø§ÛŒØ´', url: 'http://5.123.1.2/wh7f454c46tw0/PLTV/88888888/224/3221226467/index.m3u8', category: 'radio', icon: 'ğŸª' },
            { id: 48, name: 'Ø±Ø§Ø¯ÛŒÙˆ Ú¯ÙØªÚ¯Ùˆ', url: 'http://5.123.1.2/wh7f454c46tw0/PLTV/88888888/224/3221226453/index.m3u8', category: 'radio', icon: 'ğŸ—£ï¸' },
            { id: 49, name: 'Ø±Ø§Ø¯ÛŒÙˆ Ø§Ù‚ØªØµØ§Ø¯', url: 'http://5.123.1.2/wh7f454c46tw0/PLTV/88888888/224/3221226450/index.m3u8', category: 'radio', icon: 'ğŸ’°' },
            { id: 50, name: 'Ø±Ø§Ø¯ÛŒÙˆ Ø³Ù„Ø§Ù…Øª', url: 'http://5.123.1.2/wh7f454c46tw0/PLTV/88888888/224/3221226464/index.m3u8', category: 'radio', icon: 'â¤ï¸' },
            { id: 51, name: 'Ø±Ø§Ø¯ÛŒÙˆ Ø§Ù†Ú¯Ù„ÛŒØ³ÛŒ', url: 'http://5.123.1.2/wh7f454c46tw0/PLTV/88888888/224/3221226465/index.m3u8', category: 'radio', icon: 'ğŸ‡¬ğŸ‡§' },

            // Other Channels
            { id: 52, name: 'Ø§ÛŒØ±Ø§Ù† Ø§ÛŒÙ†ØªØ±Ù†Ø´Ù†Ø§Ù„', url: 'https://dev-live.livetvstream.co.uk/LS-63503-4/index.m3u8', category: 'other', icon: 'ğŸŒ' },
            { id: 53, name: 'Ø¨ÛŒâ€ŒØ¨ÛŒâ€ŒØ³ÛŒ ÙØ§Ø±Ø³ÛŒ', url: 'https://vs-hls-pushb-ww-live.akamaized.net/x=4/i=urn:bbc:pips:service:bbc_persian_tv/pc_hd_abr_v2.m3u8', category: 'other', icon: 'ğŸ“¡' },
        ];

        const categoryNames = {
            'main': 'Ø´Ø¨Ú©Ù‡â€ŒÙ‡Ø§ÛŒ Ø§ØµÙ„ÛŒ',
            'special': 'Ø´Ø¨Ú©Ù‡â€ŒÙ‡Ø§ÛŒ ØªØ®ØµØµÛŒ',
            'provincial': 'Ø´Ø¨Ú©Ù‡â€ŒÙ‡Ø§ÛŒ Ø§Ø³ØªØ§Ù†ÛŒ',
            'international': 'Ø´Ø¨Ú©Ù‡â€ŒÙ‡Ø§ÛŒ Ø¨ÛŒÙ†â€ŒØ§Ù„Ù…Ù„Ù„ÛŒ',
            'radio': 'Ø±Ø§Ø¯ÛŒÙˆÙ‡Ø§',
            'other': 'Ø³Ø§ÛŒØ± Ø´Ø¨Ú©Ù‡â€ŒÙ‡Ø§'
        };

        let hls = null;
        let currentChannel = null;
        let currentCategory = 'all';
        const video = document.getElementById('videoPlayer');

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            renderChannels();
        });

        // Render Channels
        function renderChannels() {
            const grid = document.getElementById('channelsGrid');
            const filteredChannels = currentCategory === 'all' 
                ? channels 
                : channels.filter(ch => ch.category === currentCategory);

            grid.innerHTML = filteredChannels.map(channel => `
                <div class="channel-card cursor-pointer bg-slate-800/50 hover:bg-slate-700/50 rounded-xl p-4 transition-all duration-300 border border-slate-700 hover:border-blue-500 ${currentChannel?.id === channel.id ? 'ring-2 ring-blue-500 bg-blue-900/30' : ''}"
                     onclick="playChannel(${channel.id})">
                    <div class="text-center">
                        <div class="w-14 h-14 mx-auto mb-3 bg-gradient-to-br from-slate-700 to-slate-600 rounded-xl flex items-center justify-center text-2xl">
                            ${channel.icon}
                        </div>
                        <h3 class="font-medium text-sm text-white truncate">${channel.name}</h3>
                        <p class="text-xs text-slate-400 mt-1">${channel.category === 'radio' ? 'ğŸ“» Ø±Ø§Ø¯ÛŒÙˆ' : 'ğŸ“º ØªÙ„ÙˆÛŒØ²ÛŒÙˆÙ†'}</p>
                    </div>
                </div>
            `).join('');
        }

        // Filter Category
        function filterCategory(category) {
            currentCategory = category;
            
            // Update button styles
            document.querySelectorAll('.category-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.dataset.category === category) {
                    btn.classList.add('active');
                }
            });
            
            renderChannels();
        }

        // Play Channel
        function playChannel(channelId) {
            const channel = channels.find(ch => ch.id === channelId);
            if (!channel) return;

            currentChannel = channel;
            
            // Update UI
            document.getElementById('currentChannelName').textContent = channel.name;
            document.getElementById('currentChannelCategory').textContent = categoryNames[channel.category] || '';
            document.getElementById('currentChannelIcon').textContent = channel.icon;
            
            // Hide placeholder, show loading
            document.getElementById('placeholderOverlay').classList.add('hidden');
            document.getElementById('errorOverlay').classList.add('hidden');
            document.getElementById('loadingOverlay').classList.remove('hidden');

            // Re-render to show active state
            renderChannels();
            
            // Scroll to player on mobile
            if (window.innerWidth < 768) {
                document.querySelector('.player-container').scrollIntoView({ behavior: 'smooth' });
            }

            // Load video
            loadVideo(channel.url);
        }

        // Load Video with HLS.js
        function loadVideo(url) {
            // Cleanup previous instance
            if (hls) {
                hls.destroy();
                hls = null;
            }

            if (Hls.isSupported()) {
                hls = new Hls({
                    enableWorker: true,
                    lowLatencyMode: true,
                });
                
                hls.loadSource(url);
                hls.attachMedia(video);
                
                hls.on(Hls.Events.MANIFEST_PARSED, (event, data) => {
                    document.getElementById('loadingOverlay').classList.add('hidden');
                    video.play().catch(e => console.log('Autoplay prevented'));
                    updateQualityOptions(data.levels);
                    updatePlayPauseIcon();
                });

                hls.on(Hls.Events.ERROR, (event, data) => {
                    if (data.fatal) {
                        switch (data.type) {
                            case Hls.ErrorTypes.NETWORK_ERROR:
                                console.log('Network error, trying to recover...');
                                hls.startLoad();
                                break;
                            case Hls.ErrorTypes.MEDIA_ERROR:
                                console.log('Media error, trying to recover...');
                                hls.recoverMediaError();
                                break;
                            default:
                                document.getElementById('loadingOverlay').classList.add('hidden');
                                document.getElementById('errorOverlay').classList.remove('hidden');
                                break;
                        }
                    }
                });

            } else if (video.canPlayType('application/vnd.apple.mpegurl')) {
                // Safari native HLS support
                video.src = url;
                video.addEventListener('loadedmetadata', () => {
                    document.getElementById('loadingOverlay').classList.add('hidden');
                    video.play().catch(e => console.log('Autoplay prevented'));
                    updatePlayPauseIcon();
                });
                video.addEventListener('error', () => {
                    document.getElementById('loadingOverlay').classList.add('hidden');
                    document.getElementById('errorOverlay').classList.remove('hidden');
                });
            }
        }

        // Update Quality Options
        function updateQualityOptions(levels) {
            const menu = document.getElementById('qualityMenu');
            
            if (!levels || levels.length === 0) {
                menu.innerHTML = '<div class="px-4 py-2 text-slate-400">Ú©ÛŒÙÛŒØª Ø«Ø§Ø¨Øª</div>';
                return;
            }

            let options = '<button onclick="setQuality(-1)" class="w-full px-4 py-3 text-right hover:bg-slate-700 transition flex items-center justify-between"><span>Ø®ÙˆØ¯Ú©Ø§Ø±</span><span class="text-xs text-slate-400">Auto</span></button>';
            
            levels.forEach((level, index) => {
                const height = level.height || 'N/A';
                const label = height >= 1080 ? 'Full HD' : height >= 720 ? 'HD' : height >= 480 ? 'SD' : 'Low';
                options += `<button onclick="setQuality(${index})" class="w-full px-4 py-3 text-right hover:bg-slate-700 transition flex items-center justify-between"><span>${height}p</span><span class="text-xs text-slate-400">${label}</span></button>`;
            });
            
            menu.innerHTML = options;
        }

        // Set Quality
        function setQuality(levelIndex) {
            if (hls) {
                hls.currentLevel = levelIndex;
                const qualityText = levelIndex === -1 ? 'Ø®ÙˆØ¯Ú©Ø§Ø±' : `${hls.levels[levelIndex]?.height || ''}p`;
                document.getElementById('currentQuality').textContent = qualityText;
            }
            toggleQualityMenu();
        }

        // Toggle Quality Menu
        function toggleQualityMenu() {
            document.getElementById('qualityMenu').classList.toggle('show');
        }

        // Close quality menu when clicking outside
        document.addEventListener('click', (e) => {
            if (!e.target.closest('.relative')) {
                document.getElementById('qualityMenu').classList.remove('show');
            }
        });

        // Toggle Play/Pause
        function togglePlayPause() {
            if (!currentChannel) return;
            
            if (video.paused) {
                video.play();
            } else {
                video.pause();
            }
            updatePlayPauseIcon();
        }

        // Update Play/Pause Icon
        function updatePlayPauseIcon() {
            const playIcon = document.getElementById('playIcon');
            const pauseIcon = document.getElementById('pauseIcon');
            
            if (video.paused) {
                playIcon.classList.remove('hidden');
                pauseIcon.classList.add('hidden');
            } else {
                playIcon.classList.add('hidden');
                pauseIcon.classList.remove('hidden');
            }
        }

        // Video events
        video.addEventListener('play', updatePlayPauseIcon);
        video.addEventListener('pause', updatePlayPauseIcon);

        // Go Live (refresh to current time)
        function goLive() {
            if (!currentChannel) return;
            
            if (hls) {
                // Jump to live edge
                video.currentTime = video.duration - 1;
            }
            video.play();
            updatePlayPauseIcon();
        }

        // Retry Play
        function retryPlay() {
            if (currentChannel) {
                playChannel(currentChannel.id);
            }
        }

        // Toggle Fullscreen
        function toggleFullscreen() {
            const playerContainer = document.querySelector('.player-container');
            
            if (!document.fullscreenElement) {
                if (playerContainer.requestFullscreen) {
                    playerContainer.requestFullscreen();
                } else if (playerContainer.webkitRequestFullscreen) {
                    playerContainer.webkitRequestFullscreen();
                } else if (video.webkitEnterFullscreen) {
                    video.webkitEnterFullscreen();
                }
            } else {
                if (document.exitFullscreen) {
                    document.exitFullscreen();
                }
            }
        }

        // Volume Control
        function setVolume(value) {
            video.volume = value / 100;
            video.muted = value == 0;
            document.getElementById('volumePercent').textContent = value + '%';
            updateVolumeIcon();
        }

        function toggleMute() {
            video.muted = !video.muted;
            updateVolumeIcon();
            if (video.muted) {
                document.getElementById('volumeSlider').value = 0;
                document.getElementById('volumePercent').textContent = '0%';
            } else {
                document.getElementById('volumeSlider').value = video.volume * 100;
                document.getElementById('volumePercent').textContent = Math.round(video.volume * 100) + '%';
            }
        }

        function updateVolumeIcon() {
            const volumeIcon = document.getElementById('volumeIcon');
            const muteIcon = document.getElementById('muteIcon');
            
            if (video.muted || video.volume === 0) {
                volumeIcon.classList.add('hidden');
                muteIcon.classList.remove('hidden');
            } else {
                volumeIcon.classList.remove('hidden');
                muteIcon.classList.add('hidden');
            }
        }

        // Keyboard shortcuts
        document.addEventListener('keydown', (e) => {
            if (e.code === 'Space') {
                e.preventDefault();
                togglePlayPause();
            } else if (e.code === 'KeyF') {
                toggleFullscreen();
            } else if (e.code === 'KeyM') {
                toggleMute();
            } else if (e.code === 'ArrowUp') {
                e.preventDefault();
                const newVol = Math.min(100, parseInt(document.getElementById('volumeSlider').value) + 10);
                document.getElementById('volumeSlider').value = newVol;
                setVolume(newVol);
            } else if (e.code === 'ArrowDown') {
                e.preventDefault();
                const newVol = Math.max(0, parseInt(document.getElementById('volumeSlider').value) - 10);
                document.getElementById('volumeSlider').value = newVol;
                setVolume(newVol);
            }
        });
    </script>
</body>
</html>
